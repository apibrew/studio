type: resource
name: Flow
namespace:
  name: studio
properties:
  name:
    title: Name
    description: Name
    type: STRING
    length: 255
    required: true
    unique: true
  statements:
    type: list
    required: true
    item:
      type: struct
      typeRef: Statement
    defaultValue: [ ]
types:
  - name: EventParams
    properties:
      type:
        type: string
      action:
        type: enum
        enumValues:
          - CREATE
          - GET
          - LOAD
          - UPDATE
          - DELETE
          - LIST
      order:
        type: enum
        enumValues:
          - BEFORE
          - AFTER
      sync:
        type: bool
      responds:
        type: bool
      finalizes:
        type: bool
      annotations:
        type: map
        item:
          type: string
  - name: ActionParams
    properties:
      type:
        type: string
  - name: ApiSaveParams
    properties:
      type:
        type: string
      payload:
        type: object
  - name: ApiLoadParams
    properties:
      type:
        type: string
      match:
        type: object
      params:
        type: object
  - name: AssignParams
    properties:
      left:
        type: string
      expression:
        type: string
  - name: FunctionCallParams
    properties:
      name:
        type: string
      params:
        type: object
  - name: CodeParams
    properties:
      content:
        type: string
  - name: ConditionParams
    properties:
      condition:
        type: string
      pass:
        type: list
        required: true
        item:
          type: struct
          typeRef: Statement
        defaultValue: [ ]
      fail:
        type: list
        required: true
        item:
          type: struct
          typeRef: Statement
        defaultValue: [ ]
  - name: GroupParams
    properties:
      name:
        type: string
      statements:
        type: list
        required: true
        item:
          type: struct
          typeRef: Statement
        defaultValue: [ ]
  - name: FailParams
    properties:
      message:
        type: string
  - name: Statement
    properties:
      kind:
        type: enum
        enumValues:
          - ACTION
          - EVENT
          - API_CREATE
          - API_GET
          - API_LOAD
          - API_UPDATE
          - API_DELETE
          - API_LIST
          - CODE
          - FAIL
          - ASSIGN
          - CONDITION
          - GROUP
          - HTTP_CALL
          - FUNCTION_CALL
          - TEMPLATE_CALL
          - END
      params:
        type: object
      variable:
        type: string
      checkResult:
        type: bool
